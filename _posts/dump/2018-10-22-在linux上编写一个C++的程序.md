---
layout: post
category: dump
title: 在linux上使用Vim编写一个C/C++程序
description: g++命令以及cmake的指令
---

## 前期的准备工作
　　说起来前期的准备工作也不算繁琐，安装几个必要的软件就可以了：

```python
sudo apt-get install vim    #安装vim文本编辑工具
sudo apt-get install g++    #
```

## g++参数的问题
　　当我们安装好了g++编译器之后，我们就可以使用g++对写好的文件进行编译和运行，下面总结两个比较常用的g++命令的参数：
- -0: 制定目标名称，缺省的时候，g++编译出来的文件是a.out，在终端中是可以直接运行的。

```python
g++ -0 main main.cpp
cd ../
./main      #在终端中便可以出现我们需要的结果。
```

- -c：生成一个对应的obj文件，对应的后缀是.o

```python
g++ -c main main.cpp
```

## cmake的安装

```python
sudo apt-get install cmake
```

　　首先是关于什么是cmake。看了一篇博客，cmake的功能大概就是告诉编译器如何去编译链接源代码。在windows平台下是通过project文件去管理这些，如果不适用cmake，就需要为windows和linux系统写对应的project文件和makefile文件(所以makefile文件对应的应该就是在linux上告诉编译器如何去编译链接源代码)。<br>
　　编写一个简单的cmake，使用cmake首先需要一个CmakeLists.txt文件，我们需要把配置文件写入该文件，然后通过cmake去处理这个文件。假设我们存在一个.cpp文件，这个时候我们就可以编写一个CmakeLists.txt文件。

```python
#cmake需要最小版本
cmake_minimum_required(VERSION 2.8)     #查了一下自己电脑上cmake的版本，cmake --version=3.4
#项目的名字
project(Hello)
#包含原程序，也就是把给定目录下的源程序复制给变量DIR_SRC
aux_source_directory(DIR_SRC ./)
#生成程序
add_executable(hello${DIR_SRC})     #但是在终端中运行的时候报错参数输入错误
#执行接下来的命令
mkdir build
cd build
cmake ..
make 
```

```python
#参看通过Clion下生成的一个工程对应的CMakeLists.txt文件
cmake_minimum_required(VERSION 3.12)
project(untitled)   #这个是整个工程project存放的目录名称
set(CMAKE_CXX_STANDARD 14)  #自己试了一下，如果没有这个配置项的话程序也是可以正常运行的。
add_executable(untitled main.cpp)
```

　　那么关于使用cmake来运行程序和直接使用g++来运行程序之间的区别，感觉如果使用g++的话，直接使用编译器去运行程序，如果是使用make的话应该也是会存在一个调用编译器的过程的。