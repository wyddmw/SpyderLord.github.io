---
layout: post
category: blog 
title: Overfitting
description: 对深度学习中过拟合问题的一些思考
---

## 什么是过拟合？
- 个人看来，过拟合就是训练的模型在训练集上跑的效果非常理想，但是在测试集上的效果却差强人意，很明显，模型只是记住了训练集中的数字，但是对于数字背后体现出来的特征并没有真正理解，一个直接的原因就是训练的次数太多了，所以这也就体现出来了一个问题训练的次数并不是越多越好，斯坦福的教材中提到过，需要将模型的复杂程度和训练的次数结合起来，二者之间是存在紧密联系的。
- 存在着紧密联系？仔细想一下好像确实是这样的，如果我们在某一层卷积层中使用的卷积核的数量很多，就意味着我们想要提取多个特征，所以我们多训练几次也是解释的通的，就好比我们人在识别一张包含的非常大信息量的图片的时候，我们也会多看几次去做好识别，但是对于一张非常简单的图片来说如果我们每次都非常仔细的去看，而且还看非常多次数，那么我们将图片上一些非常不起眼的小细节会去注意到也就不足为奇了。
## 在实际的程序代码我们从什么地方看出来会产生过拟合。
- 在MNIST手写是别题的训练中，我们每次使用的minibatch的尺寸是50,然后我们迭代的次数是20000次，加起来这就是1000000次，我记得分给训练用的数据量是50000,按照这样计算，平均每张图都会学习20次。我之前想的问题是，因为每次都会选取不同的minibatch，就相当于是每次都在给模型一个测试集。为什么会在训练的时候正确率很高但是在测试的时候正确率很低呢？问题就在这样的一个数据上，其实在训练的次数没有到一个batch数据量的时候，对于模型来说，每一个batch都相当于是一个testbatch，如果我们这个时候去输出训练集和测试集上的数据进行一个比对的话，其实测试集和训练集的正确率是非常接近的，而且按照梯度下降进行优化的原则来看，测试集上的正确率比训练集上的正确率还高也是有可能的。
- 我们也在电脑上按照自己的想法进行了验证，之前的迭代次数是20000,如果我们改成了151,然后minibatch的选择是30,然后将每100次的结果输出一次，在训练集上的正确率不断地进行上升，然后在输出测试集上正确率的时候数值确实也非常的相近。
## 如何来看什么时候出现了过拟合呢？
- 这个问题在谷歌上搜索了一下之后看到了这样的回答，我们将在训练集上的正确率和在测试集上的正确率都都打印出来，如果在训练集上的正确率不断地升高，但是在测试集上的正确率却出现走低，就意味着可能是过拟合了。
- 写到这里，忽然又想到了一个问题，因为我们将一个完整的数据集分成了test、train还有一个validation，那么validation这个数据集说是起到的是验证的作用，那会不会就是通过这个validation来帮助我们观察是否出现过拟合呢？还会进一步去想这个问题的。
- [http://blog.csdn.net/u010167269/article/details/51340070](http://blog.csdn.net/u010167269/article/details/51340070)这个博客中写的内容还是比较详细的，validation确实是具备防止过拟合作用的，上面自己的想法还是正确的～但是除了这个功能之外，validation还有其他的作用！

## 分割线 2018-04-19
- 这两天在训练FCN网络的时候发现了一个问题，我们应该如何看loss的值。想起来之前在notes中看到的关于训练方法的问题，我们应该先用小数量的样本进行训练，然后训练到过拟合为止。想到这里就想起来一个问题，我们为什么要防止过拟合。从loss的结果来看，就是train的数据集上的值不断升高，但是在测试集上的损失值却从出现走低的现象可能就是出现了过拟合。之所以要避免过拟合现象的出现就是因为我们在训练数据集上的测试效果虽然很好，但是范化能力很差的现象。这样的模型我们是不需要的。我们要训练出来的是范化能力强的网络。
