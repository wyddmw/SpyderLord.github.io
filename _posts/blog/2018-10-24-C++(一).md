---
layout: post
category: blog
title: C++复习（一）
description: 变量的初始化 类的复习
---

## 变量的定义
　　变量定义的基本形式是：首先是类型说明符，随后紧跟由一个或多个变量名组成的列表，其中变量名以逗号来分隔，最后以分号结束。定义时还可以为一个或多个变量赋初值。初始值：当对象在创建的时候获得了一个特定的值，我们说这个对象被初始化了。用于初始化变量的值可以是任意复杂的表达式。当一次定义了两个或多个变量时，对象的名字随着定义也就马上可以使用了。因此在同一条定义语句中，可以用先定义的变量值去初始化后定义的其他变量值。<br>
　　初始化和赋值之间的关系需要搞清楚，初始化的含义是创建变量时赋予其一个初始值，而赋值的含义是把对象的当前值擦除，而以一个新值来代替。<br>
　　变量的声明和定义之间的关系：为了允许把程序拆分成多个逻辑部分来编写，C++语言支持分离式编译机制，该机制允许讲程序分割为若干个文件，每个文件都可以被单独编译。声明的作用是使得名字为程序所知，一个文件如果想使用到别处定义的名字就必须包含对那个名字的声明。

## 对象和类
　　看一看知乎上撸代码好多年的程序员关于面向对象和面向过程两者区别的回答还是非常有意思的，也很有启发性，给出知乎的链接[https://www.zhihu.com/question/27468564](https://www.zhihu.com/question/27468564)。面向对象编程是一种特殊的、设计程序的概念性方法，C++通过一些特性改进了C语言。使用C语言是典型的面向过程编程的例子，而使用C++则是在面向对象在编程。使用面向对象的编程使我们不用为每一个功能写那么复杂的执行步骤，直接调用别人写好的就可以。隐藏复杂的执行流程，对外提供一个高度抽象的接口。面向过程的程序设计的重点在实现，而面向对象的重点在设计。面向过程可以理解为我们不断的写你函数完成我需要的功能，注重函数的实现。面向对象的设计则是在我写这个功能的时候考虑怎么把这个功能封装起来。以后我就可以直接拿来用了。注重的是封装好的调用，不管函数怎么实现的，只要最后的结果。在使用类的时候，对于成员函数来说，我们需要知道的是函数的接口，我们需要知道成员函数接受什么样的参数以及返回什么类型的值。原则是将实现细节从接口设计中分离出来。如果之后找到了更好的、实现数据表示或是成员函数细节的方法，可以对这些细节进行修改，而无需改动程序接口，这使程序维护起来更加容易。
　　面向对象编程的最重要的特性：
- 抽象
- 封装和数据隐藏
- 多态
- 继承
- 代码的可重用性<br>
　　指定基本类型完成了三项基本的工作：
- 决定数据对象需要的内存数量
- 决定如何解释内存中的位(long和float在内存中占用的位数是相同的，但是将它们转换为数值的方法是不一样的)
- 决定可使用数据对象执行的操作或方法<br>

### C++中的类
　　类是一种将抽象转换为用户定义类型的C++工具，它将数据表示和操纵数据的方法结合成一个简洁的包。<br>
　　一般来说，类规范由两个部分组成
- 类的声明：以数据成员的方式来描述数据部分，以成员函数(被称为方法)的方式描述公有接口。
- 类方法定义：描述如何实现类成员函数。<br>
　　简单来说，类声明提供了类的蓝图，而方法定义则提供了细节。<br>
　　需要存储的数据以数据成员的形式出现，需要执行的操作以类函数成员的形式出现。成员函数可以就地定义——在声明成员函数的时候直接给出定义，也可以在用原型表示。

### 访问控制
　　关键字private和public也是全新的。它们描述了对类成员函数的访问控制。使用类对象的程序都可以直接访问公有部分，但是只能通过公有成员函数(或是友元函数)来访问对象的私有对象。假如说，我们设置某个数据成员为私有，我们对它的访问只能通过公有的成员函数来进行。因此，公有成员函数是程序和对象的私有成员之间的桥梁，提供了对象和程序之间的接口。防止程序直接访问数据被称为数据隐藏。C++还提供了第三个访问关键字protected。<br>
　　类设计尽可能将公有接口与实现细节分开。公有接口表示设计的抽象组件。将实现细节放在一起并将它们与抽象类型分开称为封装。数据隐藏是一种封装，将实现的细节隐藏在私有部分中，封装的另一个例子就是将函数定义和类的声明放在不同的文件中。<br>
　　控制对成员的访问：公有还是私有。无论是数据成员还是成员函数，都可以在类的公有部分或私有部分中声明它。因为隐藏数据是面向对象编程的一个重要的特性，因此数据项通常是放在私有部分的，组成类接口的成员函数放在共有部分。也可以把成员函数放私有部分中。不能直接从程序中调用这种函数，但是公有方法却可以使用他们。通常，私有成员函数用来处理补数据公有接口的实现细节。我们不需要在类的生命中添加关键字private，因为类兑现搞得默认访问控制就是私有的。

### 实现类成员函数
　　我们需要为类声明中的成员函数提供代码。类成员函数和普通的函数在定义的时候存在不同之处：
- 定义成员函数的时候，使用作用域运算符来标识函数所属的类。
- 类方法可以访问类的私有组件。<br>
　　使用作用于运算符确定了方法定义对应的类的身份。同一个类的其他成员函数不必使用作用域解析运算符，因为它们是属于同一个类的，但是在类声明和方法定义之外使用时，需要采取特殊的措施。

## 类的构造函数
　　对于一个类来说，我们还需要为其提供构造函数和析构函数。因为数据成员一般是设置为私有的，程序只能通过公有的成员函数去访问数据成员，所以需要设置合适的成员函数，才能成功将对象初始化。我们不能假设用户一定会去调用某个确定的成员函数，这样就不能保证所有的数据成员都是有初始值的。避开这个问题的方法就是在创建对象的时候，自动对它进行初始化。为此，C++提供了一个特殊的成员函数——类构造函数，专门用于构造新的对象、将值赋给它们的数据成员。构造函数的名称和类的名称是相同的，但是没有返回值，所以没有构造函数是没有声明类型的。<br>
　　声明和定义构造函数：函数的原型在类声明的公有部分中。<br>
　　使用构造函数：C++提供了两种使用构造函数来初始化对象的方式，分别是显式和隐式的调用。

```C++
Stock food=Stock(params)        //显式的调用
Stock food(params)              //隐式的调用
```
　　
　　构造函数的使用方式不同于其他的类方法，我们没有办法使用对象来调用构造函数，因为在构造函数使用之前，对象是不存在的，所以构造函数是用来创建对象的，而不能通过对象来调用。<br>

### 默认构造函数
　　默认构造函数是在没有显式提供初始值的时候，用来创建对象的构造函数。如果没有提供任何构造函数，那么C++将自动提供默认构造函数。它是默认构造函数的隐式版本，不做任何工作，只是创建一个对象，但是不初始化其成员。当且仅当没有定义任何构造函数的时候，编译器才会提供默认构造函数。为类定义了构造函数之后，程序员就必须为它提供默认构造函数。如果我们只是提供了非默认构造函数，但是没有提供默认构造函数，那么下面的声明将会出错：

```C++
Stock stock;
```

　　这样做的原因可能是想禁止创建未初始化的对象。然而，如果要创建对象，而不显式地初始化，就必须定义一个不接受任何参数的默认构造函数。定义默认构造函数的方法有两种：一种是给已有的构造函数所有的参数提供默认值。另一种方式是通过函数的重载来定义另一个构造函数——一个没有参数的构造函数。实际上，通常应该初始化所有的对象，以确保所有的成员一开始就有已知的合理值。所以用户定义的默认构造函数通常给所有数据成员提供隐式初始值：

```C++
Stock::Stock()
{
    company="no name";
    shares=0;
    share_val=0.0;
    total_val=0.0
}
```

 　　使用上面两种方法中的一种(没有参数或者参数有自己的默认值)，创建了默认的构造函数之后，便可以声明对象变量，而不进行显式初始化：

 ```C++
 Stock first;
 Stock first=Stock();
 ```

 ## 析构函数
 　　使用构造函数来创建对象对象之后，对象过期之后，程序将自动调用一个特殊的成员函数——析构函数。析构函数的工作是完成清理工作，如果构造函数使用new来分配内存的话，析构函数则来delete释放这些内存。在上面的构造函数中，没有使用new来分配内存，所以析构函数实际上没有需要完成的任务。在这种情况下，只需要让编译器生成一个什么都不需要做的析构函数就可以了。析构函数也是没有返回值和声明类型的。和构造函数不一样的是，析构函数是没有参数的：

 ```C++
 Stock::~Stock()
 {

 }
 ```

　　什么时候调用析构函数呢，这个由编译器决定，通常不应该在程序中显式地调用析构函数。因为在类对象过期的时候析构函数将自动被调用，所以必须有一个析构函数。如果程序员没有提供析构函数，编译器将隐式地声明一个默认构造函数，并在发现导致对象被删除的代码之后，提供默认析构函数的定义。