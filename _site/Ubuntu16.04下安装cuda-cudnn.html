<!DOCTYPE html>
<html>
<head>
    <!--
    * Author:         BeiYuu
    * Revised:        Mukosame
    -->
    <meta charset="utf-8" />
    <title>ubuntu16.04安装显卡驱动及cuda | Spyder's blog</title>
    <meta name="author" content="SpyderLord" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Everything about SpyderLord" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/.vscode" />
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>
</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">SpyderLord</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="https://github.com/SpyderLord/" target="_blank" style="margin-left:-5px;"><img src="https://github.com/favicon.ico" alt="" width="22"/></a>
           <!-- <a href="http://www.zhihu.com/people/xiang-xiao-yu-20" target="_blank" style="text-align:right"><img src="http://www.zhihu.com/favicon.ico" alt="" width="22"/></a>-->
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/Ubuntu16.04%E4%B8%8B%E5%AE%89%E8%A3%85cuda-cudnn" title="ubuntu16.04安装显卡驱动及cuda">ubuntu16.04安装显卡驱动及cuda</a></h1>
        <p class="entry-date">2018-10-13</p>
        <h2 id="section">一些准备工作</h2>
<p>　　在网上搜索到了很多不同的教程，但是在自己测试了之后发现其实效果不太理想，都忘记了自己第一次安装cuda和cuDNN的时候是什么样的方法了，重新记录一下自己的这次安装过程，为之后再次装系统打基础(手动捂脸.jpg)。<br /></p>

<p><code class="highlighter-rouge">python
spci | grep -i nvidia #第一步先查看自己的显卡型号，然后根据自己显卡的型号到NVIDIA的官网上下载对应的驱动和cuDNN
</code>
　　在写这篇博客的时候，NVIDIA的官网上，CUDA已经更新到了10.0的版本，找了好久才找到稳定版本的CUDA8.0版本，给出链接<a href="https://developer.nvidia.com/cuda-80-ga2-download-archive">https://developer.nvidia.com/cuda-80-ga2-download-archive</a>。根据自己系统的型号下载对应的文件就可以了。驱动的话在官网上就可以下载了，给出384版本的下载链接<a href="https://www.geforce.com/drivers/results/132524">https://www.geforce.com/drivers/results/132524</a>。</p>

<h2 id="section-1">原有驱动的卸载</h2>
<p>　　这部分直接是通过命令行进行操作的，所以直接上命令，也是在很多篇博客中找了好久，才找到了有适合自己系统使用的命令。<br />
　　还是一些题外话，在其中的一篇博客中看到可以在设置中的Software&amp;Updates查看到自己电脑上的显卡驱动，直接进行选择后apply changes就能完成显卡驱动的安装，虽然这种方法在我自己的电脑上没有能够实现，但是可以在其中看到当前电脑上使用的驱动是什么版本型号的。</p>

<p><code class="highlighter-rouge">
sudo apt-get --purge remove nvidia-*
sudo apt-get --pruge remove xserver-xorg-video-nouveau
#上面的命令输入之后基本上就完成了之前驱动的卸载。
</code>
## 屏蔽开源驱动nouveau
　　网上给出了两个方法：
- 在运行nvidia的驱动安装程序的时候，会提示是否需要进行屏蔽，选择yes就可以来了。
- 编辑blacklist.conf，sudo gedit /etc/modprobe.d/blacklist.conf，添加如下的内容。</p>

<p><code class="highlighter-rouge">
blacklist vga16fb
blacklist nouveau
blacklist rivafb
blacklist nvidiafb
blacklist rivatv
</code></p>

<h2 id="section-2">安装驱动</h2>
<p>　　虽然在上面的过程中已经完成了驱动的下载，但是按照网上说明的先关掉图形界面然后ctrl+alt+F1安装驱动，发现没有能够实现理想的功能。最后还是通过apt的方式来完成驱动的安装。</p>

<p><code class="highlighter-rouge">python
ctrl+alt+F1进入终端
sudo service lightdm stop   #关闭图形界面
sudo apt-get install nvidia-384
sudo service lightdm start  #启动图形界面
nvidia-smi                  #查看是否能够显示出来显卡的相关信息，如果可以输出的话，说明安装成功了
</code></p>

<h2 id="cuda">安装cuda</h2>
<p>　　这个时候就需要使用到上面安装了的cuda的包了。</p>

<p><code class="highlighter-rouge">python
sudo chmod 777 cuda_8.0...run
sudo ./cuda_8.0..run
#一个需要注意的地方就是，在选择是否要安装nvidia驱动的时候，我们需要选择否，因为上面已经完成了384版本驱动的安装，但是这里遇到的一个问题就是，完成了安装之后，发现并没有安装cuda-toolkit，根据提示需要通过apt的方式对这个包进行重新的安装。
</code>
　　配置环境变量：</p>

<p>```python
sudo gedit ~/.bashrc
#在尾部进行内容的添加
export  CUDA_HOME=/usr/local/cuda-8.0
export  PATH=$CUDA_HOME/bin$PATH
export  LD_LIBRARY_PATH=$CUDA_HOME/lib64$LD_LIBRARY_PATH</p>

<p>source ~/.bashrc
```</p>

<p>　　测试一下是否完成了安装，这个时候如果按照的流程的话，就会报错，终端中的错误信息是没有安装cuda-toolkit</p>

<p><code class="highlighter-rouge">python
sudo apt-get install cuda-toolkit   #不知道为什么，这个安装的时间好长啊
#对版本的信息进行查看
nvcc --version
#samples测试：
cd /usr/local/cuda-8.0/samples/1_Utilities/deviceQuery 
make
sudo ./deviceQuery
</code>
　　如果显示出来一些GPU的信息，说明安装成功。</p>

<h2 id="cudnn">安装cuDNN</h2>
<p>　　先是cuDNN的官网链接，<a href="https://developer.nvidia.com/rdp/cudnn-archive">https://developer.nvidia.com/rdp/cudnn-archive</a>，选择的版本是cuDNN5.0 for CUDA8.0，这个需要登录账号。</p>

<p><code class="highlighter-rouge">python
cd ./Downloads/
sudo tar -xzvf cuDNN..tar.gz
sudo tar -zxvf ./cudnn-8.0-linux-x64-v5.1.tgz
cd cuda; sudo cp lib64/lib* /usr/local/cuda/lib64/; 
sudo cp include/cudnn.h /usr/local/cuda/include/  
#更新软连接: 
cd /usr/local/cuda/lib64/       #但是在自己的电脑上测试的时候使用到的是../cuda-8.0/lib64
sudo chmod +r libcudnn.so.5.1.10
sudo ln -sf libcudnn.so.5.1.10 libcudnn.so.5
sudo ln -sf libcudnn.so.5 libcudnn.so
sudo ldconfig
</code></p>

<h2 id="caffe-cuda">安装caffe-cuda</h2>
<p>　　在运行demo的时候，按照caffe-cuda的安装说明，官网上给出了不同系统版本上不同的命令，16.04版本的安装命令如下：</p>

<p><code class="highlighter-rouge">python
sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler
sudo apt-get install --no-install-recommends libboost-all-dev
</code>
　　但是为了保险，最后还是在终端中通过命令又安装了一遍cuda-toolkit</p>

<p><code class="highlighter-rouge">python
sudo apt-get install nvidia-cuda-toolkit
</code></p>

<h2 id="section-3">一些依赖项的安装</h2>
<p>　　在使用编译的方式进行安装的时候，终端中报错缺少一些依赖项，期初的报错指的是cmake中缺少一些文件，解决的方法是从github上clone下整个库，然后将库中的cmake文件夹放到自己的caffe目录下。这个完成之后，不报错cmake的问题了，但是运行cmake ..的时候，终端还是报错缺少一些依赖，检查了一下，应该是前期在安装caffe的时候，这些依赖项没有安装成功：</p>

<p><code class="highlighter-rouge">python
sudo apt-get install libprotobuf-dev 
sudo apt-get install libleveldb-dev 
sudo apt-get install libsnappy-dev 
sudo apt-get install libopencv-dev 
sudo apt-get install libhdf5-serial-dev 
sudo apt-get install protobuf-compiler
sudo apt-get install --no-install-recommends 
sudo apt-get install libboost-all-dev
sudo apt-get install libopenblas-dev
sudo apt-get install liblapack-dev 
sudo apt-get install libatlas-base-dev
sudo apt-get install libgflags-dev 
sudo apt-get install libgoogle-glog-dev 
sudo apt-get install liblmdb-dev
</code></p>

    </div>

    <div class="sidenav">
        <h2>Blog</h2>
        <ul class="artical-list">
        
            <li><a href="/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E5%A4%84%E7%90%86%E7%AE%97%E6%B3%95">SSD中的一些重要的算法</a></li>
        
            <li><a href="/SSD">SSD-MobileNet</a></li>
        
            <li><a href="/SVS%E7%AE%97%E6%B3%95%E6%95%B4%E7%90%86">SVS算法整理</a></li>
        
            <li><a href="/DeepLearning%E5%A4%8D%E4%B9%A0(%E4%B8%89)">DeepLearning复习(三)</a></li>
        
            <li><a href="/Jetson_TX2%E5%BC%80%E5%8F%91">Jetson_TX2开发</a></li>
        
            <li><a href="/C++(%E4%B8%80)">C++复习（一）</a></li>
        
            <li><a href="/%E5%9C%A8linux%E4%B8%8A%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAC++%E7%9A%84%E7%A8%8B%E5%BA%8F">在linux上使用Vim编写一个C/C++程序</a></li>
        
            <li><a href="/Ubuntu16.04%E4%B8%8B%E5%AE%89%E8%A3%85cuda-cudnn">ubuntu16.04安装显卡驱动及cuda</a></li>
        
            <li><a href="/%E7%A0%94%E7%A9%B6%E7%94%9F%E7%9A%84%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1">研究生的数学建模</a></li>
        
            <li><a href="/Faster_RCNN">Faster RCNN</a></li>
        
            <li><a href="/Fast-RCNN">Fast R-CNN</a></li>
        
            <li><a href="/R-CNN">R-CNN学习笔记</a></li>
        
            <li><a href="/DeepLearning%E5%A4%8D%E4%B9%A0%E4%BA%94">DeepLearning复习(五)</a></li>
        
            <li><a href="/Deeplearning%E5%A4%8D%E4%B9%A0%E5%9B%9B">DeepLearning(四)</a></li>
        
            <li><a href="/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E5%A4%8D%E4%B9%A0">Deeplearning复习(三)</a></li>
        
            <li><a href="/%E4%B8%80%E6%AE%B5%E5%A5%94%E6%B3%A2%E4%B9%8B%E5%90%8E">一段奔波结束</a></li>
        
            <li><a href="/%E9%99%88%E8%80%81%E5%B8%88%E8%AE%BA%E6%96%87%E6%80%BB%E7%BB%93">陈老师的论文简述</a></li>
        
            <li><a href="/Deeplearning%E5%A4%8D%E4%B9%A0-%E4%BA%8C">DeepLearning复习(二)</a></li>
        
            <li><a href="/%E5%8F%88%E6%98%AF%E4%B8%80%E7%AF%87%E5%85%B3%E4%BA%8E%E4%BF%9D%E7%A0%94%E7%9A%84%E9%9A%8F%E6%84%9F">又是保送过程中的一点随感</a></li>
        
            <li><a href="/%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%92%8C%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0">大数据和机器学习学习笔记</a></li>
        
            <li><a href="/%E4%B8%80%E4%B8%AA%E4%BA%BA%E7%9A%84%E7%AB%AF%E5%8D%88%E5%87%BA%E8%A1%8C">一个人的端午出游</a></li>
        
            <li><a href="/%E8%BF%98%E6%98%AF%E5%8C%97%E4%BA%AC">还是北京</a></li>
        
            <li><a href="/FaceNet%E5%AD%A6%E4%B9%A0">FaceNet学习</a></li>
        
            <li><a href="/%E5%88%86%E7%B1%BB%E4%B8%8E%E5%9B%9E%E5%BD%92%E4%B9%8B%E9%97%B4%E7%9A%84%E6%AF%94%E8%BE%83">分类和回归之间的比较</a></li>
        
            <li><a href="/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0">神经网络的复习</a></li>
        
            <li><a href="/DeepLearning%E5%A4%8D%E4%B9%A0-%E4%B8%80">DeepLearning复习（一）</a></li>
        
            <li><a href="/BinarySearchTree">Binary Search Tree</a></li>
        
            <li><a href="/%E5%B0%86%E6%9D%A5%E7%9A%84%E4%BD%A0%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%84%9F%E8%B0%A2%E7%8E%B0%E5%9C%A8%E5%8A%AA%E5%8A%9B%E7%9A%84%E8%87%AA%E5%B7%B1">将来的你一定会感谢现在努力的自己</a></li>
        
            <li><a href="/PSPNet%E7%9A%84%E5%AD%A6%E4%B9%A0">PSP网络的学习</a></li>
        
            <li><a href="/ResNet%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0">ResNet网络的学习</a></li>
        
            <li><a href="/MultiNet%E7%BD%91%E7%BB%9C%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%A1%A5%E5%85%85">MultiNet网络学习的补充</a></li>
        
            <li><a href="/Optimization">Optimization</a></li>
        
            <li><a href="/%E5%85%B3%E4%BA%8E%E6%89%A7%E8%A1%8C%E5%8A%9B">关于执行力</a></li>
        
            <li><a href="/FCN_Net%E7%BB%93%E6%9E%84%E7%9A%84%E4%B8%80%E7%82%B9%E8%A1%A5%E5%85%85">FCN_Net的补充</a></li>
        
            <li><a href="/FCN">FCN_Net</a></li>
        
            <li><a href="/%E6%B8%85%E6%98%8E%E5%9C%A8%E5%8C%97%E4%BA%AC">清明在北京</a></li>
        
            <li><a href="/%E5%85%B3%E4%BA%8E%E5%86%99%E8%87%AA%E8%8D%90%E4%BF%A1">关于写保研自荐信</a></li>
        
            <li><a href="/overfit">Overfitting</a></li>
        
            <li><a href="/ordinary-vs-cnn">普通神经网络和卷积神经网络之间比较</a></li>
        
            <li><a href="/multinet">MultiNet学习</a></li>
        
            <li><a href="/first">第一篇博文</a></li>
        
            <li><a href="/end-to-end">end-to-end</a></li>
        
            <li><a href="/WhyDeeplearning">WhyDeepLearning</a></li>
        
            <li><a href="/DataProblem">MiniDataSet</a></li>
        
        </ul>

        <h2>Dump</h2>
        <ul class="artical-list">
        
            <li><a href="/%E4%B8%80%E4%B8%AAidea">目标检测和深度估计的结合</a></li>
        
            <li><a href="/object_detection_api">使用tensorflow的API直接进行训练</a></li>
        
            <li><a href="/tensorboard%E5%8F%AF%E8%A7%86%E5%8C%96">TensorBoard可视化查看模型的graph</a></li>
        
            <li><a href="/scope">arg_scope</a></li>
        
            <li><a href="/tensorflow%E7%9A%84session">tensorflow的session</a></li>
        
            <li><a href="/protobuf">protobuf</a></li>
        
            <li><a href="/stringstream">stringstream</a></li>
        
            <li><a href="/C++%E4%B8%AD%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%93%8D%E4%BD%9C%E7%AC%A6">C++中的几个操作符</a></li>
        
            <li><a href="/pip3_error">pip3更新之后出错</a></li>
        
            <li><a href="/%E7%94%A8AD%E7%94%BBPCB%E6%9D%BF">使用AD制作PCB板</a></li>
        
            <li><a href="/cuda%E5%92%8Ccudnn">什么是cuda和cuDNN</a></li>
        
            <li><a href="/%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85ubuntu16.04.05">ubuntu16.04.5的安装</a></li>
        
            <li><a href="/python%E4%BB%8E%E5%A4%96%E7%95%8C%E8%AF%BB%E5%8F%96%E5%8F%82%E6%95%B0">python解析命令行参数</a></li>
        
            <li><a href="/anaconda%E5%AE%89%E8%A3%85%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85">anaconda安装第三方包</a></li>
        
            <li><a href="/%E5%8D%B7%E7%A7%AF%E5%92%8C%E6%BB%A4%E6%B3%A2%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB">卷积和滤波之间的区别</a></li>
        
            <li><a href="/%E5%8F%82%E6%95%B0%E5%88%9D%E5%A7%8B%E5%8C%96%E9%97%AE%E9%A2%98">参数初始化的问题</a></li>
        
            <li><a href="/%E5%8F%82%E6%95%B0%E5%92%8C%E8%B6%85%E5%8F%82%E6%95%B0%E7%9A%84%E9%97%AE%E9%A2%98">参数和超参数的问题</a></li>
        
            <li><a href="/%E6%9D%82%E8%AE%B0%E9%9A%8F%E7%AC%94">杂记随笔</a></li>
        
            <li><a href="/%E5%85%B3%E4%BA%8E%E8%B4%AB%E5%AF%8C%E5%B7%AE%E8%B7%9D">关于贫富差距的感想</a></li>
        
            <li><a href="/%E4%BE%9D%E7%84%B6%E5%9B%9E%E5%BD%92%E5%92%8C%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E7%9A%84%E5%B7%AE%E5%88%AB%E7%9A%84%E9%97%AE%E9%A2%98">依然是SVM和线性回归之间的对比问题</a></li>
        
            <li><a href="/%E8%AE%AD%E7%BB%83%E9%9B%86%E9%AA%8C%E8%AF%81%E9%9B%86%E5%92%8C%E6%B5%8B%E8%AF%95%E9%9B%86%E7%9A%84%E4%BD%9C%E7%94%A8">训练集验证集和测试集的作用</a></li>
        
            <li><a href="/C%E8%AF%AD%E8%A8%80%E5%A4%8D%E4%B9%A0%E4%B8%89">C语言复习三</a></li>
        
            <li><a href="/%E5%85%B3%E4%BA%8E%E5%AF%BC%E5%85%A5%E5%A4%B4%E6%96%87%E4%BB%B6%E7%9A%84%E9%97%AE%E9%A2%98">关于导入头文件的问题</a></li>
        
            <li><a href="/C%E8%AF%AD%E8%A8%80%E5%A4%8D%E4%B9%A0%E4%BA%8C">C语言复习二</a></li>
        
            <li><a href="/C%E8%AF%AD%E8%A8%80%E5%A4%8D%E4%B9%A0%E4%B8%80">C语言复习一</a></li>
        
            <li><a href="/%E9%A2%84%E8%AE%AD%E7%BB%83%E5%A5%BD%E7%9A%84%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8A%A0%E8%BD%BD">加载预训练好的模型时遇到的问题</a></li>
        
            <li><a href="/python%E4%BB%8E%E5%A4%96%E9%83%A8%E4%BC%A0%E5%85%A5%E5%8F%82%E6%95%B0">Python从外部传入参数</a></li>
        
            <li><a href="/%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E4%B8%80%E4%B8%AA%E8%AE%AD%E7%BB%83%E5%A5%BD%E7%9A%84%E6%A8%A1%E5%9E%8B">如何保存一个训练好的模型或是参数</a></li>
        
            <li><a href="/CV%E6%8C%91%E6%88%98%E8%B5%9B">CV中非常重要的挑战赛</a></li>
        
            <li><a href="/%E5%9B%BE%E8%AE%BA%E7%AE%97%E6%B3%95">图论算法</a></li>
        
            <li><a href="/%E8%BF%91%E4%B8%A4%E5%A4%A9%E5%AF%B9%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%B8%80%E7%82%B9%E5%B0%8F%E6%84%9F%E6%83%B3">近两天对深度学习的一点感想</a></li>
        
            <li><a href="/benchmark">几个概念的理解</a></li>
        
            <li><a href="/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B8%AD%E7%9A%84%E5%BA%A6%E9%87%8F%E6%A0%87%E5%87%86">深度学习语义分割中的度量标准</a></li>
        
            <li><a href="/logits">Logits</a></li>
        
            <li><a href="/iteration%E5%92%8Cepoch">iteration和epoch比较</a></li>
        
            <li><a href="/Batch_Normalization">Batch_Normalization</a></li>
        
            <li><a href="/Memory_arrangement">linux动态内存管理</a></li>
        
            <li><a href="/ground_truth">ground truth</a></li>
        
            <li><a href="/VGG16">CNN_Architecture</a></li>
        
        </ul>

        <h2>Project</h2>
        <ul class="artical-list">
        
            <li><a href="/%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E6%80%BB%E7%BB%93">通信原理复习总结</a></li>
        
            <li><a href="/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1">课程设计</a></li>
        
        </ul>
    </div>
</div>

<script src="/js/post.js" type="text/javascript"></script>


    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').slideUp(100);
                }else{
                    $('.home-contact').slideDown(100);
                }
            });
        })
    </script>
</body>
</html>
